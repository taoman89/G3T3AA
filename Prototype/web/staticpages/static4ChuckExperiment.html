<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <script src ='jquery-1.11.0.min.js' type = 'text/javascript'></script>
    </head>
    <body>
        <script type = 'text/javascript'>
            $(document).ready(function(){
                var  serverIP = new Array(); 
                var pagesDir = '';
                var noOfChunks = 0;
                $('#errorMsg').hide();
                
                $('#noOfServers').on('keyup', function(){
                   if(!$.isNumeric( $('#noOfServers').val())){
                       $('#errorMsg').show(); 
                       $('#serverIP').html('');
                   }
                   else{
                       $('#errorMsg').hide();
                       $('#serverIP').html('');
                       for(var i = 0 ; i < $('#noOfServers').val(); i ++){
                           ipAdd = 'http://192.168.1.'+ (i+1)+':8081';
                           serverIP.push(ipAdd);
                           $('#serverIP').append('Server IP : ' + ipAdd + '<br/>')
                       }
                   }
  
                });
                
                $('#noOfChunks').on('change', function(){
                   if(!$.isNumeric( $('#noOfChunks').val())){
                       $('#errorMsg').show(); 
                       $('#mainContainer').html('');
                   }
                   else{
                       $('#errorMsg').hide();
                       $('#mainContainer').html('');
                       for(var i = 0 ; i < $('#noOfChunks').val(); i ++){
            
                           $('#mainContainer').append('Part '+ (i+1) + ' div <br/>');
                           $('#mainContainer').append ('<div id="part'+(i+1)+'"></div>');
                       }
                       pagesDir=  $('#noOfChunks').val()+'Pages/';
                       noOfChunks = $('#noOfChunks').val();
                       
                   }
                   
                   
                });
                
                $('#startExp').click(function(){
                    var counter =0;
                    for(var i =0; i < noOfChunks; i ++){
                        if(counter===serverIP.length){
                            counter = 0;
                        }
//                        $.ajax( serverIP[counter] + '/Prototype/staticpages/'+ noOfChunks +'Pages/static4_' + i + '.html' ).done(function(response){
//                            $('#part'+(i+1)).html(response);
//                        });
                        console.log(serverIP[0]);
                        $.ajax({
                            type: 'GET',
                            url: serverIP[counter] + '/Prototype/staticpages/'+ noOfChunks +'Pages/static4_' + i + '.html',
                            success: function(response) {
                                $('#part'+(i+1)).html(response);
                            }
                          });
                        counter++;
                        
                    }                    
                });
            });
        </script>
        <div id ='errorMsg'>Enter Numbers PLEASE!</div> 
        Number of Servers : <input id = 'noOfServers' type ='text'/> <br/>
        How Many Chunks ? : 
        <select id = "noOfChunks">
            <option value=""></option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="250">250</option>
            <option value="500">500</option>
          </select>
        <br/>
        
        <button id ="startExp"> Start Experiment </button>
        
        <div id ='serverIP'>
            
        </div>
        
        <div id='mainContainer'>
            
        </div>


        
    </body>
</html>
